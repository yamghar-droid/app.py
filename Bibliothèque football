import streamlit as st
import pandas as pd

# Configuration de la page
st.set_page_config(page_title="Ballon de Plume", page_icon="‚öΩ")

# Connexion au Google Sheets (en format CSV public)
SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOrrGaESUYXhQUNary4l42k0kMZf-ENZOX4cPwzHourKSyWZBHnNDkFDHw30tNo-76KBYWYwZSHG2J/pubhtml"

@st.cache_data
def load_data():
    return pd.read_csv(SHEET_URL)

df = load_data()

# --- INTERFACE ---
st.title("üìñ Ballon de Plume")
st.subheader("L'histoire du football par la litt√©rature")

# Barre lat√©rale pour choisir l'auteur
auteur_choisi = st.sidebar.selectbox("Choisissez un auteur :", df["Nom_Auteur"])

# Filtrer les donn√©es selon l'auteur
info = df[df["Nom_Auteur"] == auteur_choisi].iloc[0]

# Affichage de la fiche
col1, col2 = st.columns([1, 2])

with col1:
    st.image(info["Portrait_URL"], caption=f"{info['Nom_Auteur']} ({info['Nationalite']})")

with col2:
    st.markdown(f"### *{info['Accroche']}*")
    st.write(info["Texte_Litteraire"])

st.divider()

# --- SECTION QUIZ ---
st.write("### üß† Le D√©fi du Scribe")
option = st.radio(info["Question_Quiz"], [info["Option_A"], info["Option_B"]])

if st.button("Valider la r√©ponse"):
    if option == info["Bonne_Reponse"]:
        st.success(f"Bravo ! Vous gagnez le badge : {info['Badge_Nom']}")
        st.balloons()
    else:
        st.error("Dommage... R√©essayez !")
    st.info(info["Explication_Feedback"])
